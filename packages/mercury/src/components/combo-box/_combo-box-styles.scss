@import "tokens";

%combo-box {
  @include combo-box-tokens();
}

%combo-box__window {
  background-color: var(--mer-window__bg-color);
  border: var(--mer-color__elevation--01);
  border-radius: var(--mer-window__border-radius);
  box-shadow: var(--mer-window__box-shadow);
  padding: var(--mer-spacing--2xs);
}

%combo-box__group {
  border-block-end: var(--mer-border__width--sm) solid
    var(--mer-color__elevation--04);
}

%combo-box__group-header {
  font-family: var(--mer-font-family--inter-semi-bold);
  padding-block: var(--mer-spacing--3xs);
  padding-inline: var(--mer-spacing--xs);
  color: var(--mer-text__bright);

  &-expandable--hover {
    background-color: var(--mer-item__bg-color--selected);
    color: var(--mer-item__color--hover);
  }
}

%combo-box__item {
  border-radius: var(--mer-border__radius--sm);
  padding-block: var(--mer-spacing--3xs);
  padding-inline: var(--mer-spacing--xs);
  color: var(--mer-text__on-elevation);
  font-family: var(--mer-font-family--inter-regular);

  &--disabled {
    color: var(--mer-text__on-disabled);
  }

  &--nested {
    padding-inline-start: calc(
      var(--ch-combo-box-item-gap) +
        var(--ch-combo-box-group__expandable-button-size) +
        var(--mer-spacing--2xs)
    );
  }

  &--selected {
    background-color: var(--mer-item__bg-color--selected);
    color: var(--mer-item__color--hover);
  }
}

/// @group ComboBox
/// @param {String} $combo-box-selector [".combo-box"] -
/// @param {String} $combo-box--disabled-selector [".combo-box[disabled]"] -
/// @param {String} $combo-box__placeholder-selector [".combo-box::part(placeholder)"] -
/// @param {String} $window-selector [".combo-box::part(window)"] -
/// @param {String} $group__selector [".combo-box::part(group)"] -
/// @param {String} $group__header-selector [".combo-box::part(group__header)"] -
/// @param {String} $group__header--disabled-selector [".combo-box::part(group__header disabled)"] -
/// @param {String} $group__header--expandable-selector [".combo-box::part(group__header expandable)"] -
/// @param {String} $item-selector [".combo-box::part(item)"] -
/// @param {String} $item--disabled-selector [".combo-box::part(item disabled)"] -
/// @param {String} $item--nested-selector [".combo-box::part(item nested)"] -
/// @param {String} $item--selected-selector [".combo-box::part(item selected)"] -
/// @param {Boolean} $add--disabled [true] -
/// @param {Boolean} $add--placeholder [true] -
/// @param {Boolean} $add--placeholder-var [true] -
/// @param {Boolean} $add--error [true] -
@mixin combo-box(
  $combo-box-selector: ".combo-box",
  $combo-box--disabled-selector: ".combo-box[disabled]",
  $combo-box__placeholder-selector: ".combo-box::part(placeholder)",
  $window-selector: ".combo-box::part(window)",
  $group__selector: ".combo-box::part(group)",
  $group__header-selector: ".combo-box::part(group__header)",
  $group__header--disabled-selector: ".combo-box::part(group__header disabled)",
  $group__header--expandable-selector:
    ".combo-box::part(group__header expandable)",
  $item-selector: ".combo-box::part(item)",
  $item--disabled-selector: ".combo-box::part(item disabled)",
  $item--nested-selector: ".combo-box::part(item nested)",
  $item--selected-selector: ".combo-box::part(item selected)",
  $add--disabled: true,
  $add--placeholder: true,
  $add--placeholder-var: true,
  $add--error: true
) {
  // TODO: IMPROVE STYLE. Unanimo's implementation does not work well in Sidebar Menus

  #{$combo-box-selector} {
    @extend %form-input;
    @extend %combo-box;
    &:focus {
      @extend %form-input--focus;
    }

    @if $add--placeholder-var {
      // @include form-input-placeholder-var();
    }
  }

  @if $add--placeholder {
    #{$combo-box__placeholder-selector} {
      @extend %form-input__placeholder;
    }
  }

  @if $add--disabled {
    #{$combo-box--disabled-selector} {
      @extend %form-input--disabled;
    }

    #{$group__header--disabled-selector} {
      @extend %combo-box__item--disabled;
    }

    #{$item--disabled-selector} {
      @extend %combo-box__item--disabled;
    }
  }

  // - - - - - - - - - - - - - - - - - - - -
  //                 Window
  // - - - - - - - - - - - - - - - - - - - -
  #{$window-selector} {
    @extend %combo-box__window;
  }

  // - - - - - - - - - - - - - - - - - - - -
  //                  Group
  // - - - - - - - - - - - - - - - - - - - -
  #{$group__selector} {
    @extend %combo-box__group;
  }

  #{$group__header-selector} {
    @extend %combo-box__group-header;
  }

  #{$group__header--expandable-selector}:hover {
    @extend %combo-box__group-header-expandable--hover;
  }

  // - - - - - - - - - - - - - - - - - - - -
  //                  Item
  // - - - - - - - - - - - - - - - - - - - -
  #{$item-selector} {
    @extend %combo-box__item;
  }

  #{$item--nested-selector} {
    @extend %combo-box__item--nested;
  }

  #{$item--selected-selector} {
    @extend %combo-box__item--selected;
  }
}
